From 866418efd50e230e9bf343cd5adc31ce559dd14b Mon Sep 17 00:00:00 2001
From: Paul Ramsey <pramsey@cleverelephant.ca>
Date: Thu, 24 Aug 2023 08:32:14 -0700
Subject: [PATCH] Round off WKT outputs in ST_AsText to avoid platform specific
 failures.

---
 regress/core/tickets.sql      | 2 +-
 regress/core/tickets_expected | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/regress/core/tickets.sql b/regress/core/tickets.sql
index d94955e6617..4f246275d11 100644
--- a/regress/core/tickets.sql
+++ b/regress/core/tickets.sql
@@ -430,7 +430,7 @@ SELECT '#1273.1', st_equals(p.g, postgis_dropbbox(p.g)) from p;
 -- #1292
 SELECT '#1292', ST_AsText(ST_SnapToGrid(ST_GeomFromText(
 	'GEOMETRYCOLLECTION(POINT(180 90),POLYGON((140 50,150 50,180 50,140 50),(140 60,150 60,180 60,140 60)))'
-	, 4326), 0.00001)::geography);
+	, 4326), 0.00001)::geography, 3);
 
 -- #1292.1
 SELECT '#1292.1', ST_AsText(ST_GeomFromText('POINT(180.00000000001 95)')::geography),
diff --git a/regress/core/tickets_expected b/regress/core/tickets_expected
index fb740bb4340..44e4f6e655c 100644
--- a/regress/core/tickets_expected
+++ b/regress/core/tickets_expected
@@ -140,7 +140,7 @@ ERROR:  First argument must be a LINESTRING
 #1060|FFFFFFFF2
 #1273|t
 #1273.1|t
-#1292|GEOMETRYCOLLECTION(POINT(180 90),POLYGON((140 50.00000000000001,150 50.00000000000001,180 50.00000000000001,140 50.00000000000001),(140 60.00000000000001,150 60.00000000000001,180 60.00000000000001,140 60.00000000000001)))
+#1292|GEOMETRYCOLLECTION(POINT(180 90),POLYGON((140 50,150 50,180 50,140 50),(140 60,150 60,180 60,140 60)))
 NOTICE:  Coordinate values were coerced into range [-180 -90, 180 90] for GEOGRAPHY
 NOTICE:  Coordinate values were coerced into range [-180 -90, 180 90] for GEOGRAPHY
 #1292.1|POINT(180 85)|POINT(-175 90)
